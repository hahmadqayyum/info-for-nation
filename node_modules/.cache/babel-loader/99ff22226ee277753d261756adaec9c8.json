{"ast":null,"code":"/**\n * A square\n *\n * @param {string} heading The heading of the square\n * @param {Object} props Properties of the square\n * @param {boolean} props.isSearch Whether the square is a search square\n * @param {boolean} [props.options] The search options\n * @param {boolean} [props.prefix] The search prefix\n * @param {boolean} [props.links] The square links\n * @param {Object} configBool The global boolean config options\n * @param {Object} configStyle The global style config options\n */\nfunction Square(heading, props, configBool, configStyle) {\n  this.heading = heading;\n  this.props = props;\n  this.border_width_hovered = configStyle.border_width_hovered;\n  this.border_width_normal = configStyle.border_width_normal;\n  this.focus_color = configStyle.focus_color;\n  this.focus_bg_color = configStyle.focus_bg_color;\n  this.link_color = configStyle.link_color;\n  this.isAlwaysopen = configBool.alwaysopen;\n  this.hasBorders = configBool.borders; // Make sure size has a unit\n\n  let size = configStyle.square_size;\n  this.size = isNaN(size) ? size.substr(0, size.length - 2) : size;\n  this.sizeUnit = isNaN(size) ? size.substr(-2) : \"px\";\n  this.squareElement = document.createElement(\"div\");\n  this.squareElement.setAttribute(\"class\", \"sqr\");\n  this.headingElement = document.createElement(\"span\");\n  const headingTextnode = document.createTextNode(this.heading);\n  this.headingElement.appendChild(headingTextnode);\n  this.contentElement = document.createElement(\"div\");\n  this.contentElement.setAttribute(\"class\", \"content\");\n\n  if (!this.props.isSearch) {\n    const linkElements = [];\n\n    for (let i = 0; i < this.props.links.length; i++) {\n      linkElements[i] = document.createElement(\"a\");\n      linkElements[i].tabIndex = \"-1\";\n      linkElements[i].setAttribute(\"href\", this.props.links[i].url);\n      const textnode = document.createTextNode(this.props.links[i].name);\n      linkElements[i].appendChild(textnode);\n      this.contentElement.appendChild(linkElements[i]);\n      this.contentElement.appendChild(document.createElement(\"br\"));\n    }\n  } else {\n    this.squareElement.setAttribute(\"id\", \"search_sqr\");\n    this.searchinput = document.createElement(\"input\");\n    this.searchinput.tabIndex = \"-1\";\n    this.searchinput.setAttribute(\"id\", \"searchinput\");\n    this.searchinput.setAttribute(\"autocomplete\", \"off\");\n    this.contentElement.appendChild(this.searchinput);\n    this.popup;\n\n    const constructPopup = () => {\n      let opts = [];\n\n      for (const option of this.props.options) {\n        // Remove scheme, path and everything after path from URL\n        const url = option.url.replace(/https?:\\/\\//, \"\").replace(/\\/.*/, \"\");\n        opts.push({\n          opt: option.opt,\n          description: url\n        });\n      }\n\n      const bottomText = \"startpage v\" + browser.runtime.getManifest().version;\n      this.popup = new Popup(this.props.prefix, opts, bottomText, {\n        background: configStyle.foreground,\n        color: configStyle.link_color,\n        fontFamily: configStyle.link_font,\n        fontSize: configStyle.link_font_size\n      });\n    };\n\n    const searchEnter = event => {\n      const key = event.keyCode;\n\n      if (key == 13) {\n        const query = this.searchinput.value;\n\n        if (query[0] == this.props.prefix) {\n          if (query.substr(1) == \"help\") {\n            if (this.popup === undefined) constructPopup(); // Have to requestAnimationFrame here because otherwise we're\n            // calling toggle too fast and the transition won't fire\n\n            window.requestAnimationFrame(() => this.popup.toggle());\n          } else if (query.substr(1) == \"config\") {\n            configmenuInit(undefined);\n          } else {\n            for (const option of this.props.options) {\n              if (query[1] == option.opt) {\n                query = query.substr(3);\n                window.location = option.url + query.replaceChars(\" \", option.space);\n                break;\n              }\n            }\n          }\n        } else if (query === \"\") {\n          if (this.popup === undefined) constructPopup();\n          window.requestAnimationFrame(() => this.popup.toggle());\n        } else {\n          window.location = this.props.options[0].url + query.replaceChars(\" \", this.props.options[0].space);\n        }\n      }\n    };\n\n    const searchFocused = this.searchinput == document.activeElement;\n    this.searchinput.addEventListener(\"keydown\", searchEnter);\n  }\n\n  this.squareElement.appendChild(this.headingElement);\n  this.squareElement.appendChild(this.contentElement);\n  document.getElementById(\"container\").appendChild(this.squareElement);\n\n  if (!this.isAlwaysopen) {\n    const square = this;\n    this.squareElement.addEventListener(\"mouseover\", this.expand.bind(this), false);\n    this.squareElement.addEventListener(\"mouseout\", this.contract.bind(this), false);\n  }\n} // TODO: Calculate maxHeight once on construction instead of on every call to\n// expand\n\n\n_c = Square;\n\nSquare.prototype.maxHeight = function () {\n  return this.size * 2 + (this.props.isSearch ? 37 : 25 * this.props.links.length);\n};\n\nSquare.prototype.expand = function () {\n  if (this.isAlwaysopen) return;\n  this.squareElement.style.height = this.maxHeight() + this.sizeUnit;\n\n  if (this.hasBorders) {\n    this.squareElement.style.borderWidth = this.border_width_hovered;\n  }\n};\n\nSquare.prototype.contract = function () {\n  if (this.isAlwaysopen) return;\n  this.squareElement.style.height = this.size + this.sizeUnit;\n  this.squareElement.style.borderWidth = this.border_width_normal;\n};\n\nSquare.prototype.focus = function (index) {\n  this.contentElement.childNodes[index * 2].style.backgroundColor = this.focus_bg_color;\n  this.contentElement.childNodes[index * 2].style.color = this.focus_color;\n};\n\nSquare.prototype.unfocus = function (index) {\n  this.contentElement.childNodes[index * 2].style.backgroundColor = \"initial\";\n  this.contentElement.childNodes[index * 2].style.color = this.link_color;\n};\n\nvar _c;\n\n$RefreshReg$(_c, \"Square\");","map":{"version":3,"sources":["/home/ahmadqayyum/Desktop/info-for-nation/src/home/src/js/square.js"],"names":["Square","heading","props","configBool","configStyle","border_width_hovered","border_width_normal","focus_color","focus_bg_color","link_color","isAlwaysopen","alwaysopen","hasBorders","borders","size","square_size","isNaN","substr","length","sizeUnit","squareElement","document","createElement","setAttribute","headingElement","headingTextnode","createTextNode","appendChild","contentElement","isSearch","linkElements","i","links","tabIndex","url","textnode","name","searchinput","popup","constructPopup","opts","option","options","replace","push","opt","description","bottomText","browser","runtime","getManifest","version","Popup","prefix","background","foreground","color","fontFamily","link_font","fontSize","link_font_size","searchEnter","event","key","keyCode","query","value","undefined","window","requestAnimationFrame","toggle","configmenuInit","location","replaceChars","space","searchFocused","activeElement","addEventListener","getElementById","square","expand","bind","contract","prototype","maxHeight","style","height","borderWidth","focus","index","childNodes","backgroundColor","unfocus"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASA,MAAT,CAAgBC,OAAhB,EAAyBC,KAAzB,EAAgCC,UAAhC,EAA4CC,WAA5C,EAAyD;AACvD,OAAKH,OAAL,GAAeA,OAAf;AACA,OAAKC,KAAL,GAAaA,KAAb;AACA,OAAKG,oBAAL,GAA4BD,WAAW,CAACC,oBAAxC;AACA,OAAKC,mBAAL,GAA2BF,WAAW,CAACE,mBAAvC;AACA,OAAKC,WAAL,GAAmBH,WAAW,CAACG,WAA/B;AACA,OAAKC,cAAL,GAAsBJ,WAAW,CAACI,cAAlC;AACA,OAAKC,UAAL,GAAkBL,WAAW,CAACK,UAA9B;AACA,OAAKC,YAAL,GAAoBP,UAAU,CAACQ,UAA/B;AACA,OAAKC,UAAL,GAAkBT,UAAU,CAACU,OAA7B,CATuD,CAUvD;;AACA,MAAIC,IAAI,GAAGV,WAAW,CAACW,WAAvB;AACA,OAAKD,IAAL,GAAYE,KAAK,CAACF,IAAD,CAAL,GAAcA,IAAI,CAACG,MAAL,CAAY,CAAZ,EAAeH,IAAI,CAACI,MAAL,GAAY,CAA3B,CAAd,GAA8CJ,IAA1D;AACA,OAAKK,QAAL,GAAgBH,KAAK,CAACF,IAAD,CAAL,GAAeA,IAAI,CAACG,MAAL,CAAY,CAAC,CAAb,CAAf,GAAiC,IAAjD;AAEA,OAAKG,aAAL,GAAqBC,QAAQ,CAACC,aAAT,CAAuB,KAAvB,CAArB;AACA,OAAKF,aAAL,CAAmBG,YAAnB,CAAgC,OAAhC,EAAyC,KAAzC;AAEA,OAAKC,cAAL,GAAsBH,QAAQ,CAACC,aAAT,CAAuB,MAAvB,CAAtB;AACA,QAAMG,eAAe,GAAGJ,QAAQ,CAACK,cAAT,CAAwB,KAAKzB,OAA7B,CAAxB;AACA,OAAKuB,cAAL,CAAoBG,WAApB,CAAgCF,eAAhC;AAEA,OAAKG,cAAL,GAAsBP,QAAQ,CAACC,aAAT,CAAuB,KAAvB,CAAtB;AACA,OAAKM,cAAL,CAAoBL,YAApB,CAAiC,OAAjC,EAA0C,SAA1C;;AAEA,MAAG,CAAC,KAAKrB,KAAL,CAAW2B,QAAf,EAAyB;AACvB,UAAMC,YAAY,GAAG,EAArB;;AACA,SAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAK7B,KAAL,CAAW8B,KAAX,CAAiBd,MAArC,EAA6Ca,CAAC,EAA9C,EAAkD;AAChDD,MAAAA,YAAY,CAACC,CAAD,CAAZ,GAAkBV,QAAQ,CAACC,aAAT,CAAuB,GAAvB,CAAlB;AACAQ,MAAAA,YAAY,CAACC,CAAD,CAAZ,CAAgBE,QAAhB,GAA2B,IAA3B;AACAH,MAAAA,YAAY,CAACC,CAAD,CAAZ,CAAgBR,YAAhB,CAA6B,MAA7B,EAAqC,KAAKrB,KAAL,CAAW8B,KAAX,CAAiBD,CAAjB,EAAoBG,GAAzD;AACA,YAAMC,QAAQ,GAAGd,QAAQ,CAACK,cAAT,CAAwB,KAAKxB,KAAL,CAAW8B,KAAX,CAAiBD,CAAjB,EAAoBK,IAA5C,CAAjB;AACAN,MAAAA,YAAY,CAACC,CAAD,CAAZ,CAAgBJ,WAAhB,CAA4BQ,QAA5B;AACA,WAAKP,cAAL,CAAoBD,WAApB,CAAgCG,YAAY,CAACC,CAAD,CAA5C;AACA,WAAKH,cAAL,CAAoBD,WAApB,CAAgCN,QAAQ,CAACC,aAAT,CAAuB,IAAvB,CAAhC;AACD;AACF,GAXD,MAWO;AACL,SAAKF,aAAL,CAAmBG,YAAnB,CAAgC,IAAhC,EAAsC,YAAtC;AACA,SAAKc,WAAL,GAAmBhB,QAAQ,CAACC,aAAT,CAAuB,OAAvB,CAAnB;AACA,SAAKe,WAAL,CAAiBJ,QAAjB,GAA4B,IAA5B;AACA,SAAKI,WAAL,CAAiBd,YAAjB,CAA8B,IAA9B,EAAoC,aAApC;AACA,SAAKc,WAAL,CAAiBd,YAAjB,CAA8B,cAA9B,EAA8C,KAA9C;AAEA,SAAKK,cAAL,CAAoBD,WAApB,CAAgC,KAAKU,WAArC;AAEA,SAAKC,KAAL;;AACA,UAAMC,cAAc,GAAG,MAAM;AAC3B,UAAIC,IAAI,GAAG,EAAX;;AACA,WAAK,MAAMC,MAAX,IAAqB,KAAKvC,KAAL,CAAWwC,OAAhC,EAAyC;AACvC;AACA,cAAMR,GAAG,GAAGO,MAAM,CAACP,GAAP,CAAWS,OAAX,CAAmB,aAAnB,EAAkC,EAAlC,EAAsCA,OAAtC,CAA8C,MAA9C,EAAsD,EAAtD,CAAZ;AACAH,QAAAA,IAAI,CAACI,IAAL,CAAU;AACRC,UAAAA,GAAG,EAAEJ,MAAM,CAACI,GADJ;AAERC,UAAAA,WAAW,EAAEZ;AAFL,SAAV;AAID;;AACD,YAAMa,UAAU,GAAG,gBAAgBC,OAAO,CAACC,OAAR,CAAgBC,WAAhB,GAA8BC,OAAjE;AACA,WAAKb,KAAL,GAAa,IAAIc,KAAJ,CAAU,KAAKlD,KAAL,CAAWmD,MAArB,EAA6Bb,IAA7B,EAAmCO,UAAnC,EAA+C;AAC1DO,QAAAA,UAAU,EAAElD,WAAW,CAACmD,UADkC;AAE1DC,QAAAA,KAAK,EAAEpD,WAAW,CAACK,UAFuC;AAG1DgD,QAAAA,UAAU,EAAErD,WAAW,CAACsD,SAHkC;AAI1DC,QAAAA,QAAQ,EAAEvD,WAAW,CAACwD;AAJoC,OAA/C,CAAb;AAMD,KAjBD;;AAkBA,UAAMC,WAAW,GAAIC,KAAD,IAAW;AAC7B,YAAMC,GAAG,GAAGD,KAAK,CAACE,OAAlB;;AACA,UAAGD,GAAG,IAAI,EAAV,EAAc;AACZ,cAAME,KAAK,GAAG,KAAK5B,WAAL,CAAiB6B,KAA/B;;AACA,YAAGD,KAAK,CAAC,CAAD,CAAL,IAAY,KAAK/D,KAAL,CAAWmD,MAA1B,EAAkC;AAChC,cAAGY,KAAK,CAAChD,MAAN,CAAa,CAAb,KAAmB,MAAtB,EAA8B;AAC5B,gBAAG,KAAKqB,KAAL,KAAe6B,SAAlB,EAA6B5B,cAAc,GADf,CAE5B;AACA;;AACA6B,YAAAA,MAAM,CAACC,qBAAP,CAA6B,MAAM,KAAK/B,KAAL,CAAWgC,MAAX,EAAnC;AACD,WALD,MAKO,IAAGL,KAAK,CAAChD,MAAN,CAAa,CAAb,KAAmB,QAAtB,EAAgC;AACrCsD,YAAAA,cAAc,CAACJ,SAAD,CAAd;AACD,WAFM,MAEA;AACL,iBAAI,MAAM1B,MAAV,IAAoB,KAAKvC,KAAL,CAAWwC,OAA/B,EAAwC;AACtC,kBAAGuB,KAAK,CAAC,CAAD,CAAL,IAAYxB,MAAM,CAACI,GAAtB,EAA2B;AACzBoB,gBAAAA,KAAK,GAAGA,KAAK,CAAChD,MAAN,CAAa,CAAb,CAAR;AACAmD,gBAAAA,MAAM,CAACI,QAAP,GAAkB/B,MAAM,CAACP,GAAP,GACd+B,KAAK,CAACQ,YAAN,CAAmB,GAAnB,EAAwBhC,MAAM,CAACiC,KAA/B,CADJ;AAEA;AACD;AACF;AACF;AACF,SAlBD,MAkBO,IAAGT,KAAK,KAAK,EAAb,EAAiB;AACpB,cAAG,KAAK3B,KAAL,KAAe6B,SAAlB,EAA6B5B,cAAc;AAC3C6B,UAAAA,MAAM,CAACC,qBAAP,CAA6B,MAAM,KAAK/B,KAAL,CAAWgC,MAAX,EAAnC;AACH,SAHM,MAGA;AACLF,UAAAA,MAAM,CAACI,QAAP,GAAkB,KAAKtE,KAAL,CAAWwC,OAAX,CAAmB,CAAnB,EAAsBR,GAAtB,GACd+B,KAAK,CAACQ,YAAN,CAAmB,GAAnB,EAAwB,KAAKvE,KAAL,CAAWwC,OAAX,CAAmB,CAAnB,EAAsBgC,KAA9C,CADJ;AAED;AACF;AACF,KA9BD;;AA+BA,UAAMC,aAAa,GAAI,KAAKtC,WAAL,IAAoBhB,QAAQ,CAACuD,aAApD;AACA,SAAKvC,WAAL,CAAiBwC,gBAAjB,CAAkC,SAAlC,EAA6ChB,WAA7C;AACD;;AAGD,OAAKzC,aAAL,CAAmBO,WAAnB,CAA+B,KAAKH,cAApC;AACA,OAAKJ,aAAL,CAAmBO,WAAnB,CAA+B,KAAKC,cAApC;AACAP,EAAAA,QAAQ,CAACyD,cAAT,CAAwB,WAAxB,EAAqCnD,WAArC,CAAiD,KAAKP,aAAtD;;AAEA,MAAG,CAAC,KAAKV,YAAT,EAAuB;AACrB,UAAMqE,MAAM,GAAG,IAAf;AACA,SAAK3D,aAAL,CAAmByD,gBAAnB,CAAoC,WAApC,EAAiD,KAAKG,MAAL,CAAYC,IAAZ,CAAiB,IAAjB,CAAjD,EACoC,KADpC;AAEA,SAAK7D,aAAL,CAAmByD,gBAAnB,CAAoC,UAApC,EAAgD,KAAKK,QAAL,CAAcD,IAAd,CAAmB,IAAnB,CAAhD,EACoC,KADpC;AAED;AACF,C,CAGD;AACA;;;KAnHSjF,M;;AAoHTA,MAAM,CAACmF,SAAP,CAAiBC,SAAjB,GAA6B,YAAW;AACtC,SAAO,KAAKtE,IAAL,GAAU,CAAV,IAAe,KAAKZ,KAAL,CAAW2B,QAAX,GAAsB,EAAtB,GAA2B,KAAG,KAAK3B,KAAL,CAAW8B,KAAX,CAAiBd,MAA9D,CAAP;AACD,CAFD;;AAIAlB,MAAM,CAACmF,SAAP,CAAiBH,MAAjB,GAA0B,YAAW;AACnC,MAAG,KAAKtE,YAAR,EAAsB;AACtB,OAAKU,aAAL,CAAmBiE,KAAnB,CAAyBC,MAAzB,GAAkC,KAAKF,SAAL,KAAmB,KAAKjE,QAA1D;;AACA,MAAG,KAAKP,UAAR,EAAoB;AAClB,SAAKQ,aAAL,CAAmBiE,KAAnB,CAAyBE,WAAzB,GAAuC,KAAKlF,oBAA5C;AACD;AACF,CAND;;AAQAL,MAAM,CAACmF,SAAP,CAAiBD,QAAjB,GAA4B,YAAW;AACrC,MAAG,KAAKxE,YAAR,EAAsB;AACtB,OAAKU,aAAL,CAAmBiE,KAAnB,CAAyBC,MAAzB,GAAkC,KAAKxE,IAAL,GAAY,KAAKK,QAAnD;AACA,OAAKC,aAAL,CAAmBiE,KAAnB,CAAyBE,WAAzB,GAAuC,KAAKjF,mBAA5C;AACD,CAJD;;AAMAN,MAAM,CAACmF,SAAP,CAAiBK,KAAjB,GAAyB,UAASC,KAAT,EAAgB;AACvC,OAAK7D,cAAL,CAAoB8D,UAApB,CAA+BD,KAAK,GAAC,CAArC,EAAwCJ,KAAxC,CAA8CM,eAA9C,GACI,KAAKnF,cADT;AAEA,OAAKoB,cAAL,CAAoB8D,UAApB,CAA+BD,KAAK,GAAC,CAArC,EAAwCJ,KAAxC,CAA8C7B,KAA9C,GAAsD,KAAKjD,WAA3D;AACD,CAJD;;AAMAP,MAAM,CAACmF,SAAP,CAAiBS,OAAjB,GAA2B,UAASH,KAAT,EAAgB;AACzC,OAAK7D,cAAL,CAAoB8D,UAApB,CAA+BD,KAAK,GAAC,CAArC,EAAwCJ,KAAxC,CAA8CM,eAA9C,GAAgE,SAAhE;AACA,OAAK/D,cAAL,CAAoB8D,UAApB,CAA+BD,KAAK,GAAC,CAArC,EAAwCJ,KAAxC,CAA8C7B,KAA9C,GAAsD,KAAK/C,UAA3D;AACD,CAHD","sourcesContent":["/**\n * A square\n *\n * @param {string} heading The heading of the square\n * @param {Object} props Properties of the square\n * @param {boolean} props.isSearch Whether the square is a search square\n * @param {boolean} [props.options] The search options\n * @param {boolean} [props.prefix] The search prefix\n * @param {boolean} [props.links] The square links\n * @param {Object} configBool The global boolean config options\n * @param {Object} configStyle The global style config options\n */\nfunction Square(heading, props, configBool, configStyle) {\n  this.heading = heading;\n  this.props = props;\n  this.border_width_hovered = configStyle.border_width_hovered;\n  this.border_width_normal = configStyle.border_width_normal;\n  this.focus_color = configStyle.focus_color;\n  this.focus_bg_color = configStyle.focus_bg_color;\n  this.link_color = configStyle.link_color;\n  this.isAlwaysopen = configBool.alwaysopen;\n  this.hasBorders = configBool.borders;\n  // Make sure size has a unit\n  let size = configStyle.square_size;\n  this.size = isNaN(size) ? size.substr(0, size.length-2) : size;\n  this.sizeUnit = isNaN(size) ?  size.substr(-2) : \"px\";\n\n  this.squareElement = document.createElement(\"div\");\n  this.squareElement.setAttribute(\"class\", \"sqr\");\n\n  this.headingElement = document.createElement(\"span\");\n  const headingTextnode = document.createTextNode(this.heading);\n  this.headingElement.appendChild(headingTextnode);\n\n  this.contentElement = document.createElement(\"div\");\n  this.contentElement.setAttribute(\"class\", \"content\");\n\n  if(!this.props.isSearch) {\n    const linkElements = [];\n    for (let i = 0; i < this.props.links.length; i++) {\n      linkElements[i] = document.createElement(\"a\");\n      linkElements[i].tabIndex = \"-1\";\n      linkElements[i].setAttribute(\"href\", this.props.links[i].url);\n      const textnode = document.createTextNode(this.props.links[i].name);\n      linkElements[i].appendChild(textnode);\n      this.contentElement.appendChild(linkElements[i]);\n      this.contentElement.appendChild(document.createElement(\"br\"));\n    }\n  } else {\n    this.squareElement.setAttribute(\"id\", \"search_sqr\");\n    this.searchinput = document.createElement(\"input\");\n    this.searchinput.tabIndex = \"-1\";\n    this.searchinput.setAttribute(\"id\", \"searchinput\");\n    this.searchinput.setAttribute(\"autocomplete\", \"off\");\n\n    this.contentElement.appendChild(this.searchinput);\n\n    this.popup;\n    const constructPopup = () => {\n      let opts = [];\n      for (const option of this.props.options) {\n        // Remove scheme, path and everything after path from URL\n        const url = option.url.replace(/https?:\\/\\//, \"\").replace(/\\/.*/, \"\");\n        opts.push({\n          opt: option.opt,\n          description: url\n        });\n      }\n      const bottomText = \"startpage v\" + browser.runtime.getManifest().version;\n      this.popup = new Popup(this.props.prefix, opts, bottomText, {\n        background: configStyle.foreground,\n        color: configStyle.link_color,\n        fontFamily: configStyle.link_font,\n        fontSize: configStyle.link_font_size\n      });\n    }\n    const searchEnter = (event) => {\n      const key = event.keyCode;\n      if(key == 13) {\n        const query = this.searchinput.value;\n        if(query[0] == this.props.prefix) {\n          if(query.substr(1) == \"help\") {\n            if(this.popup === undefined) constructPopup();\n            // Have to requestAnimationFrame here because otherwise we're\n            // calling toggle too fast and the transition won't fire\n            window.requestAnimationFrame(() => this.popup.toggle())\n          } else if(query.substr(1) == \"config\") {\n            configmenuInit(undefined);\n          } else {\n            for(const option of this.props.options) {\n              if(query[1] == option.opt) {\n                query = query.substr(3);\n                window.location = option.url +\n                    query.replaceChars(\" \", option.space);\n                break;\n              }\n            }\n          }\n        } else if(query === \"\") {\n            if(this.popup === undefined) constructPopup();\n            window.requestAnimationFrame(() => this.popup.toggle())\n        } else {\n          window.location = this.props.options[0].url +\n              query.replaceChars(\" \", this.props.options[0].space);\n        }\n      }\n    };\n    const searchFocused = (this.searchinput == document.activeElement);\n    this.searchinput.addEventListener(\"keydown\", searchEnter);\n  }\n\n\n  this.squareElement.appendChild(this.headingElement);\n  this.squareElement.appendChild(this.contentElement);\n  document.getElementById(\"container\").appendChild(this.squareElement);\n\n  if(!this.isAlwaysopen) {\n    const square = this;\n    this.squareElement.addEventListener(\"mouseover\", this.expand.bind(this),\n                                        false);\n    this.squareElement.addEventListener(\"mouseout\", this.contract.bind(this),\n                                        false);\n  }\n}\n\n\n// TODO: Calculate maxHeight once on construction instead of on every call to\n// expand\nSquare.prototype.maxHeight = function() {\n  return this.size*2 + (this.props.isSearch ? 37 : 25*this.props.links.length);\n}\n\nSquare.prototype.expand = function() {\n  if(this.isAlwaysopen) return;\n  this.squareElement.style.height = this.maxHeight() + this.sizeUnit;\n  if(this.hasBorders) {\n    this.squareElement.style.borderWidth = this.border_width_hovered;\n  }\n};\n\nSquare.prototype.contract = function() {\n  if(this.isAlwaysopen) return;\n  this.squareElement.style.height = this.size + this.sizeUnit;\n  this.squareElement.style.borderWidth = this.border_width_normal;\n};\n\nSquare.prototype.focus = function(index) {\n  this.contentElement.childNodes[index*2].style.backgroundColor =\n      this.focus_bg_color;\n  this.contentElement.childNodes[index*2].style.color = this.focus_color;\n};\n\nSquare.prototype.unfocus = function(index) {\n  this.contentElement.childNodes[index*2].style.backgroundColor = \"initial\";\n  this.contentElement.childNodes[index*2].style.color = this.link_color;\n};\n"]},"metadata":{},"sourceType":"module"}